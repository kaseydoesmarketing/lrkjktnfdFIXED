<!DOCTYPE html>
<html>
<head>
    <title>Dashboard Test</title>
</head>
<body>
    <h1>Dashboard Access Test</h1>
    <button onclick="testDashboard()">Test Dashboard Access</button>
    <div id="result"></div>
    
    <script>
    async function testDashboard() {
        const resultDiv = document.getElementById('result');
        
        // First do demo login
        try {
            const loginResponse = await fetch('/api/auth/demo-login', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                credentials: 'include'
            });
            
            if (!loginResponse.ok) {
                resultDiv.innerHTML = '<p style="color: red;">Login failed</p>';
                return;
            }
            
            const loginData = await loginResponse.json();
            resultDiv.innerHTML = '<p style="color: green;">Login successful! Now navigate to <a href="/dashboard">/dashboard</a></p>';
            
            // Redirect to dashboard after 2 seconds
            setTimeout(() => {
                window.location.href = '/dashboard';
            }, 2000);
            
        } catch (error) {
            resultDiv.innerHTML = '<p style="color: red;">Error: ' + error.message + '</p>';
        }
    }
    </script>
</body>
</html>