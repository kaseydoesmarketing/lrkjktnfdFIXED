ğŸ¯ Full Post-Rebuild Configuration & Functionality Audit Plan
You donâ€™t want just a â€œdebugâ€ or an â€œoverhaulâ€ â€” you want to verify & validate the entire flow from top to bottom, so you can trust the system.

Below is a concrete checklist & plan to run â€” either by you or the AI agent â€” to figure out exactly whatâ€™s broken.

ğŸ” Phase 1: Define & Test the Happy Path
âœ… Expected flow:
1ï¸âƒ£ Visit https://titletesterpro.com
2ï¸âƒ£ Click â€œGet Startedâ€ â†’ goes to /login
3ï¸âƒ£ Login â†’ OAuth popup â†’ approve scopes
4ï¸âƒ£ Redirect back â†’ /dashboard
5ï¸âƒ£ Dashboard loads with user info & videos from YouTube
6ï¸âƒ£ Can create tests & see results

You need to test each of these steps & document where it breaks.

ğŸ›  Phase 2: Validate All Configurations
2.1 ğŸ”‘ Environment Variables
Check .env (both frontend & backend) and make sure:

env
Copy
Edit
NEXT_PUBLIC_SUPABASE_URL=https://xxx.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=xxx
DATABASE_URL=postgres://...
GOOGLE_CLIENT_ID=xxx
GOOGLE_CLIENT_SECRET=xxx
FRONTEND_URL=https://titletesterpro.com
â€” No leftover www.titletesterpro.com unless youâ€™ve fixed it.
â€” No pointing to localhost.

2.2 ğŸ” Supabase Settings
Go to Supabase dashboard:
âœ… Auth â†’ Settings â†’ Redirect URLs â†’ https://titletesterpro.com/auth/callback
âœ… Auth â†’ Scopes include YouTube scopes.
âœ… Auth â†’ Tokens are saved.
âœ… RLS policies on users and accounts tables are correct.
âœ… Project is online & healthy.

2.3 ğŸŒ DNS & SSL
âœ… titletesterpro.com points to Replit & SSL is valid.
âœ… www.titletesterpro.com either works or redirects cleanly to non-www.
âœ… No mixed content warnings.

2.4 ğŸ” OAuth Flow
âœ… Supabase OAuth is issuing tokens.
âœ… Callback endpoint receives session & stores it properly.
âœ… Supabase session cookies are set (sb-access-token) and available in the browser.
âœ… No cookie_error.

ğŸ–¥ Phase 3: Check Code Logic
Ensure /login triggers Supabase sign-in with all scopes upfront.

/auth/callback is handled cleanly and saves session.

storage.ts only relies on Supabase session.

Frontend checks Supabase session before redirecting to /dashboard.

ğŸ”— Phase 4: Check the Dashboard
âœ… Does the /dashboard page load?
âœ… Is the session detected in the dashboard?
âœ… Are YouTube API calls working?
âœ… Any errors in browser console or server logs?

ğŸ”¬ Phase 5: Observe Logs
In browser console: look for red errors during login.

In Network tab: check if /auth/v1/token returns 200 or errors.

In server logs: look for exceptions or failed DB calls.

